{% extends 'base.html' %}
{% load static %}

{% block title %}CryptoFarm — Мои деревья{% endblock %}

{% block content %}
<div class="py-8 max-w-4xl mx-auto">
    <h1 class="text-2xl font-bold mb-6 text-center">Мои деревья</h1>

    <div class="space-y-4">
        {% for tree in cf_trees %}
        <div class="relative rounded-2xl shadow-lg overflow-hidden" style="background: url('{% static 'images/bg.png' %}') bottom/cover; min-height: 130px;">
            <div class="relative flex flex-col items-center py-4 px-4">
                <!-- Картинка дерева -->
                <img src="/static/images/tree_{{ tree.level }}.png" alt="Tree" class="mb-2" style="height: 98px;">
                <!-- Синяя подпись -->
                <span class="text-blue-700 bg-white/80 rounded px-2 py-0.5 text-xs font-bold mt-1 mb-3 shadow">
                    Дерево: FLORA
                </span>
                <!-- Инфо-блок -->

                <!-- Кнопка управление -->
                <a href="{% url 'tree_detail' tree.id %}" class="bg-blue-500 text-white px-4 py-1 rounded-full font-semibold hover:bg-blue-600 transition shadow">
                    Управление
                </a>
            </div>
        </div>
        {% endfor %}
    {# --- TON-деревья --- #}
    {% for tree in ton_trees %}
        <div class="relative rounded-2xl shadow-lg overflow-hidden"
             style="background: url('{% static 'images/bg.png' %}') bottom/cover; min-height: 130px;">
            <div class="relative flex flex-col items-center py-4 px-4">
                <!-- Картинка дерева -->
                <img src="/static/images/tree_{{ tree.level }}.png" alt="TON Tree" class="mb-2" style="height: 98px;">
                <!-- Синяя подпись (или своя подпись для TON) -->
                <span class="text-blue-700 bg-white/80 rounded px-2 py-0.5 text-xs font-bold mt-1 mb-3 shadow">
                    Дерево: TON
                </span>
                <!-- Инфо-блок (можно указать TON-доход и статус) -->
                <!-- <div class="...">...</div> -->
                <a href="{% url 'tree_detail' tree.id %}"
                   class="bg-blue-500 text-white px-4 py-1 rounded-full font-semibold hover:bg-blue-600 transition shadow mt-2">
                    Управление
                </a>
            </div>
        </div>
        {% endfor %}

        {# Если у пользователя вообще нет деревьев (этот блок увидит только новичок) #}
        {% if cf_trees|length == 0 and ton_trees|length == 0 %}
        <div class="card p-2 col-span-full text-center">
            <p class="text-xs">У вас ещё нет деревьев. CF-дерево создаётся автоматически при первом входе.</p>
        </div>
        {% endif %}
</div>

    </div>

</div>
{% endblock %}
